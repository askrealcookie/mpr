<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/src/main/java/org/example/service/ApiService.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/main/java/org/example/service/ApiService.java" />
              <option name="originalContent" value="package org.example.service;&#10;&#10;import com.google.gson.Gson;&#10;import com.google.gson.JsonArray;&#10;import com.google.gson.JsonObject;&#10;import org.example.model.Employee;&#10;import org.example.model.Position;&#10;import org.example.exception.ApiException;&#10;&#10;import java.io.IOException;&#10;import java.net.URI;&#10;import java.net.http.HttpClient;&#10;import java.net.http.HttpRequest;&#10;import java.net.http.HttpResponse;&#10;import java.util.ArrayList;&#10;import java.util.List;&#10;&#10;public class ApiService {&#10;    private final String API_URL = &quot;https://jsonplaceholder.typicode.com/users&quot;;&#10;    private final HttpClient httpClient;&#10;    private final Gson gson;&#10;&#10;    public ApiService() {&#10;        this(HttpClient.newHttpClient(), new Gson());&#10;    }&#10;&#10;    // Konstruktor używany w testach do wstrzyknięcia mocków&#10;    public ApiService(HttpClient httpClient, Gson gson) {&#10;        this.httpClient = httpClient;&#10;        this.gson = gson;&#10;    }&#10;&#10;    public List&lt;Employee&gt; fetchEmployeesFromApi() throws ApiException {&#10;        try {&#10;            HttpRequest request = HttpRequest.newBuilder()&#10;                    .uri(URI.create(API_URL))&#10;                    .GET()&#10;                    .build();&#10;&#10;            HttpResponse&lt;String&gt; response = httpClient.send(request, HttpResponse.BodyHandlers.ofString());&#10;&#10;            if (response.statusCode() != 200) {&#10;                throw new ApiException(&quot;blad APi: &quot; + response.statusCode());&#10;            }&#10;&#10;            JsonArray jsonArray = gson.fromJson(response.body(), JsonArray.class);&#10;            List&lt;Employee&gt; employees = new ArrayList&lt;&gt;();&#10;&#10;            for (int i = 0; i &lt; jsonArray.size(); i++) {&#10;                JsonObject userJson = jsonArray.get(i).getAsJsonObject();&#10;                employees.add(parseJsonToEmployee(userJson));&#10;            }&#10;&#10;            return employees;&#10;        } catch (IOException | InterruptedException e) {&#10;            throw new ApiException(&quot;blad&quot;, e);&#10;        }&#10;    }&#10;&#10;    private Employee parseJsonToEmployee(JsonObject json) {&#10;        String fullName = json.get(&quot;name&quot;).getAsString();&#10;        String[] nameParts = fullName.split(&quot; &quot;, 2);&#10;        String firstName = nameParts[0];&#10;        String lastName = nameParts.length &gt; 1 ? nameParts[1] : &quot;&quot;;&#10;        String email = json.get(&quot;email&quot;).getAsString();&#10;        String companyName = json.getAsJsonObject(&quot;company&quot;).get(&quot;name&quot;).getAsString();&#10;&#10;        return new Employee(&#10;            firstName,&#10;            lastName,&#10;            email,&#10;            companyName,&#10;            Position.Programista,&#10;            Position.Programista.getSalary()&#10;        );&#10;    }&#10;}" />
              <option name="updatedContent" value="package org.example.service;&#10;&#10;import com.google.gson.Gson;&#10;import com.google.gson.JsonArray;&#10;import com.google.gson.JsonObject;&#10;import org.example.model.Employee;&#10;import org.example.model.Position;&#10;import org.example.exception.ApiException;&#10;&#10;import java.io.IOException;&#10;import java.net.URI;&#10;import java.net.http.HttpClient;&#10;import java.net.http.HttpRequest;&#10;import java.net.http.HttpResponse;&#10;import java.util.ArrayList;&#10;import java.util.List;&#10;&#10;public class ApiService {&#10;    private final String API_URL = &quot;https://jsonplaceholder.typicode.com/users&quot;;&#10;    private final HttpClient httpClient;&#10;    private final Gson gson;&#10;&#10;    public ApiService() {&#10;        this(HttpClient.newHttpClient(), new Gson());&#10;    }&#10;&#10;    // Konstruktor używany w testach do wstrzyknięcia mocków&#10;    public ApiService(HttpClient httpClient, Gson gson) {&#10;        this.httpClient = httpClient;&#10;        this.gson = gson;&#10;    }&#10;&#10;    public List&lt;Employee&gt; fetchEmployeesFromApi() throws ApiException {&#10;        try {&#10;            HttpRequest request = HttpRequest.newBuilder()&#10;                    .uri(URI.create(API_URL))&#10;                    .GET()&#10;                    .build();&#10;&#10;            HttpResponse&lt;String&gt; response = httpClient.send(request, HttpResponse.BodyHandlers.ofString());&#10;&#10;            if (response.statusCode() != 200) {&#10;                throw new ApiException(&quot;blad APi: &quot; + response.statusCode());&#10;            }&#10;&#10;            JsonArray jsonArray = gson.fromJson(response.body(), JsonArray.class);&#10;            List&lt;Employee&gt; employees = new ArrayList&lt;&gt;();&#10;&#10;            for (int i = 0; i &lt; jsonArray.size(); i++) {&#10;                JsonObject userJson = jsonArray.get(i).getAsJsonObject();&#10;                employees.add(parseJsonToEmployee(userJson));&#10;            }&#10;&#10;            return employees;&#10;        } catch (IOException | InterruptedException e) {&#10;            throw new ApiException(&quot;blad&quot;, e);&#10;        }&#10;    }&#10;&#10;    private Employee parseJsonToEmployee(JsonObject json) {&#10;        String fullName = json.get(&quot;name&quot;).getAsString();&#10;        String[] nameParts = fullName.split(&quot; &quot;, 2);&#10;        String firstName = nameParts[0];&#10;        String lastName = nameParts.length &gt; 1 ? nameParts[1] : &quot;&quot;;&#10;        String email = json.get(&quot;email&quot;).getAsString();&#10;        String companyName = json.getAsJsonObject(&quot;company&quot;).get(&quot;name&quot;).getAsString();&#10;&#10;        return new Employee(&#10;            firstName,&#10;            lastName,&#10;            email,&#10;            companyName,&#10;            Position.Programista,&#10;            Position.Programista.getSalary()&#10;        );&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>